<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find hidden words about nature">
    <title>Word Search - Brain Games Hub</title>
    <link rel="stylesheet" href="styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3535919568420997"
     crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Games</a>
        
        <div class="game-container">
            <h1 style="color: #667eea; text-align: center;">üîç Nature Word Search</h1>
            
            <div class="social-share">
                <button onclick="share('twitter')" class="share-btn">üê¶ Share</button>
                <button onclick="share('facebook')" class="share-btn">üìò Share</button>
            </div>
            
            <div class="score-display">
                Words Found: <span id="found">0</span> / <span id="total">8</span>
            </div>
            
            <div id="gameArea" style="text-align: center; padding: 20px;">
                <p style="color: #667eea; margin-bottom: 15px;">Click words in the grid to mark them as found!</p>
                <canvas id="wordCanvas" width="400" height="400" 
                        style="border: 3px solid #667eea; border-radius: 15px; max-width: 100%; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1);"></canvas>
                <div id="wordList" style="margin-top: 25px;"></div>
                <button onclick="checkComplete()" class="play-btn" style="max-width: 300px; margin-top: 20px;">
                    Check Progress
                </button>
            </div>
            
            <div class="ad-rectangle">
                <div class="ad-placeholder">Advertisement 300x250</div>
            </div>
        </div>
    </div>
    
    <script src="shared.js"></script>
    <script>
        const words = ['NATURE', 'FOREST', 'OCEAN', 'RIVER', 'MOUNTAIN', 'ANIMAL', 'PLANT', 'EARTH'];
        let grid = [];
        let found = [];
        
        function init() {
            grid = generateGrid(12, words);
            found = [];
            document.getElementById('found').textContent = '0';
            document.getElementById('total').textContent = words.length;
            drawGrid();
            displayWordList();
        }
        
        function generateGrid(size, wordList) {
            const g = Array(size).fill().map(() => Array(size).fill(''));
            
            wordList.forEach(word => {
                let placed = false;
                let attempts = 0;
                
                while (!placed && attempts < 100) {
                    const dir = Math.floor(Math.random() * 3); // 0: horizontal, 1: vertical, 2: diagonal
                    const row = Math.floor(Math.random() * size);
                    const col = Math.floor(Math.random() * size);
                    
                    if (canPlace(g, word, row, col, dir, size)) {
                        placeWord(g, word, row, col, dir);
                        placed = true;
                    }
                    attempts++;
                }
            });
            
            // Fill empty cells with random letters
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    if (g[i][j] === '') {
                        g[i][j] = letters[Math.floor(Math.random() * letters.length)];
                    }
                }
            }
            
            return g;
        }
        
        function canPlace(g, word, row, col, dir, size) {
            if (dir === 0 && col + word.length > size) return false;
            if (dir === 1 && row + word.length > size) return false;
            if (dir === 2 && (row + word.length > size || col + word.length > size)) return false;
            
            for (let i = 0; i < word.length; i++) {
                const r = row + (dir === 1 || dir === 2 ? i : 0);
                const c = col + (dir === 0 || dir === 2 ? i : 0);
                if (g[r][c] !== '' && g[r][c] !== word[i]) return false;
            }
            return true;
        }
        
        function placeWord(g, word, row, col, dir) {
            for (let i = 0; i < word.length; i++) {
                const r = row + (dir === 1 || dir === 2 ? i : 0);
                const c = col + (dir === 0 || dir === 2 ? i : 0);
                g[r][c] = word[i];
            }
        }
        
        function drawGrid() {
            const canvas = document.getElementById('wordCanvas');
            const ctx = canvas.getContext('2d');
            const cellSize = canvas.width / grid.length;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = `bold ${cellSize * 0.5}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            for (let i = 0; i < grid.length; i++) {
                for (let j = 0; j < grid[i].length; j++) {
                    ctx.fillStyle = '#f8f9fa';
                    ctx.fillRect(j * cellSize + 1, i * cellSize + 1, cellSize - 2, cellSize - 2);
                    
                    ctx.fillStyle = '#333';
                    ctx.fillText(
                        grid[i][j],
                        j * cellSize + cellSize / 2,
                        i * cellSize + cellSize / 2
                    );
                }
            }
        }
        
        function displayWordList() {
            const container = document.getElementById('wordList');
            container.innerHTML = '<h3 style="color: #667eea; margin-bottom: 15px;">Find These Words:</h3>' + 
                words.map(w => `
                    <span style="display: inline-block; margin: 8px; padding: 10px 18px; border-radius: 25px; font-weight: 600; transition: all 0.3s; ${
                        found.includes(w) 
                            ? 'background: #28a745; color: white; box-shadow: 0 4px 10px rgba(40,167,69,0.3);' 
                            : 'background: #f0f0f0; color: #666;'
                    }">
                        ${w}
                    </span>
                `).join('');
        }
        
        // Simplified click to mark found
        document.getElementById('wordCanvas').onclick = function() {
            if (found.length < words.length) {
                const nextWord = words[found.length];
                found.push(nextWord);
                document.getElementById('found').textContent = found.length;
                displayWordList();
                
                if (found.length === words.length) {
                    setTimeout(checkComplete, 500);
                }
            }
        };
        
        function checkComplete() {
            if (found.length === words.length) {
                const finalScore = 100;
                alert('üéâ Congratulations! You found all words!');
                submitScore('Nature Word Search', finalScore);
                init();
            } else {
                alert(`Keep looking! You've found ${found.length} out of ${words.length} words.`);
            }
        }
        
        init();
    </script>
</body>
</html>