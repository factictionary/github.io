<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Word Games Hub</title>
		<meta name="robots" content="index, follow">
		<link rel="stylesheet" href="common.css">
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
		<script src="shared.js"></script>
		<style>
		.game-container {
			background: linear-gradient(135deg, #1a1a2e, #16213e);
		}
		h1 {
		  font-size: 2.5rem;
		  background: linear-gradient(to right, #3b82f6, #8b5cf6);
		  -webkit-background-clip: text;
		  color: transparent;
		  margin-bottom: 20px;
		  text-align: center;
		}
		.container {
		  background: rgba(255,255,255,0.1);
		  border-radius: 15px;
		  padding: 25px;
		  width: 100%;
		  max-width: 650px;
		  text-align: center;
		  backdrop-filter: blur(8px);
		  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
		}
		.difficulty {
		  margin-bottom: 15px;
		}
		/* Base reset for all buttons */
		button {
		  color: #fff;
		  border: none;
		  border-radius: 8px;
		  padding: 10px 20px;
		  cursor: pointer;
		  transition: all 0.2s ease;
		  font-weight: 600;
		  letter-spacing: 0.3px;
		}

		/* ----- DIFFICULTY BUTTONS ----- */
		#easy-btn { background: linear-gradient(135deg, #10b981, #059669); }
		#medium-btn { background: linear-gradient(135deg, #f59e0b, #d97706); }
		#hard-btn { background: linear-gradient(135deg, #ef4444, #b91c1c); }

		.difficulty button.active {
		  background: linear-gradient(135deg, #1d4ed8, #3b82f6);
		  box-shadow: 0 0 10px rgba(59, 130, 246, 0.6);
		}

		.difficulty button:hover:not(.active) {
		  transform: scale(1.05);
		  background: linear-gradient(135deg, #60a5fa, #3b82f6);
		}

		/* ----- GAME SELECTION BUTTONS ----- */
		#game-select button {
		  background: linear-gradient(135deg, #8b5cf6, #a855f7); /* violet */
		  color: #f8fafc;
		  border-radius: 10px;
		  padding: 12px 24px;
		  font-size: 1rem;
		}

		#game-select button:hover {
		  transform: translateY(-2px);
		  background: linear-gradient(135deg, #7c3aed, #6d28d9);
		  box-shadow: 0 3px 10px rgba(139, 92, 246, 0.4);
		}

		/* ----- IN-GAME OPTION BUTTONS (Answer choices, etc.) ----- */
		#options button {
		  background: linear-gradient(135deg, #10b981, #059669); /* green theme */
		  color: #f0fdf4;
		  padding: 10px 15px;
		  border-radius: 8px;
		  margin: 5px;
		  min-width: 120px;
		}

		#options button:hover {
		  background: linear-gradient(135deg, #059669, #047857);
		  transform: scale(1.05);
		}

		/* ----- GENERIC ACTION BUTTONS INSIDE GAMES (Check/New/etc.) ----- */
		#check, #new {
		  background: linear-gradient(135deg, #f59e0b, #f97316); /* orange theme */
		  margin: 8px;
		}

		#check:hover, #new:hover {
		  background: linear-gradient(135deg, #f97316, #ea580c);
		  transform: scale(1.05);
		}

		/* ----- Global hover/active animations ----- */
		button:active {
		  transform: scale(0.97);
		}

		#game-select {
		  display: flex;
		  flex-wrap: wrap;
		  justify-content: center;
		  margin-bottom: 20px;
		  gap: 10px;
		}
		#game-area {
		  padding: 20px;
		  border-radius: 15px;
		  color: #fff;
		  transition: background 0.4s ease;
		}
		#message {
		  margin: 10px 0;
		  font-size: 1.1rem;
		}
		input {
		  padding: 10px;
		  font-size: 1.1rem;
		  width: 60%;
		  border-radius: 8px;
		  border: none;
		  outline: none;
		  text-align: center;
		  margin-bottom: 10px;
		}
		</style>
	</head>
<body>
	<!-- Include common header -->
	<div id="header-container"></div>
	
	<div class="game-container">
		<a href="index.html" class="back-link">‚Üê Back to Games</a>
		<h1>üß† More Word Games</h1>
		<div class="container">
		  <div class="difficulty">
			<button id="easy-btn" class="active">Easy</button>
			<button id="medium-btn">Medium</button>
			<button id="hard-btn">Hard</button>
		  </div>

		  <div id="game-select">
			<button id="anagram-btn">üîÑ Anagram Solver</button>
			<button id="scramble-btn">üî† Word Scramble</button>
			<button id="match-btn">üí° Match Meaning</button>
			<button id="definition-btn">üìò Definition Quiz</button>
			<button id="missing-btn">üî§ Missing Letter</button>
		  </div>

	  <div id="game-area"></div>
	</div>
	</div>

	<script>
	// Load common header
	fetch('header.html')
		.then(response => response.text())
		.then(data => {
			document.getElementById('header-container').innerHTML = data;
		});
		
	const gameArea = document.getElementById("game-area");
	const difficultyBtns = document.querySelectorAll(".difficulty button");
	let currentDifficulty = "easy";
	let currentGame = null;

	// Different background colors per game
	const gameColors = {
	  anagram: "rgba(59,130,246,0.2)",
	  scramble: "rgba(139,92,246,0.2)",
	  match: "rgba(16,185,129,0.2)",
	  definition: "rgba(245,158,11,0.2)",
	  missing: "rgba(239,68,68,0.2)"
	};

	// difficulty switching
	difficultyBtns.forEach(btn => {
	  btn.addEventListener("click", e => {
		difficultyBtns.forEach(b => b.classList.remove("active"));
		e.target.classList.add("active");
		currentDifficulty = e.target.id.replace("-btn", "");
		if (currentGame) currentGame.start();
	  });
	});

	// game buttons
	document.getElementById("anagram-btn").onclick = () => startGame("anagram");
	document.getElementById("scramble-btn").onclick = () => startGame("scramble");
	document.getElementById("match-btn").onclick = () => startGame("match");
	document.getElementById("definition-btn").onclick = () => startGame("definition");
	document.getElementById("missing-btn").onclick = () => startGame("missing");

	function startGame(type) {
	  currentGame = new WordGame(type);
	  currentGame.start();
	}

	class WordGame {
	  constructor(type) {
		this.type = type;
		this.wordObj = null;
	  }

	  async start() {
		await vocabLoader.waitForLoad();
		this.wordObj = vocabLoader.getRandomWord(currentDifficulty);
		if (!this.wordObj) {
		  gameArea.innerHTML = "<p>‚ö†Ô∏è No words found.</p>";
		  return;
		}
		gameArea.style.background = gameColors[this.type] || "rgba(255,255,255,0.1)";
		if (this.type === "anagram") this.anagram();
		else if (this.type === "scramble") this.scramble();
		else if (this.type === "match") this.matchMeaning();
		else if (this.type === "definition") this.definitionQuiz();
		else if (this.type === "missing") this.missingLetter();
	  }

	  anagram() {
		const shuffled = this.shuffle(this.wordObj.word.toUpperCase().split("")).join("");
		gameArea.innerHTML = `
		  <h2>üîÑ Anagram Solver</h2>
		  <div id="display">${shuffled}</div>
		  <input id="guess" placeholder="Your guess">
		  <div id="message"></div>
		  <button id="check">Check</button><button id="new">New</button>
		`;
		this.linkBasicButtons();
	  }

	  scramble() {
		const scrambled = this.shuffle(this.wordObj.word.toUpperCase().split("")).join("");
		gameArea.innerHTML = `
		  <h2>üî† Word Scramble</h2>
		  <p>Hint: ${this.wordObj.hint || this.wordObj.definition || "No hint"}</p>
		  <div id="display">${scrambled}</div>
		  <input id="guess" placeholder="Unscramble the word">
		  <div id="message"></div>
		  <button id="check">Check</button><button id="new">New</button>
		`;
		this.linkBasicButtons();
	  }

	  matchMeaning() {
		const words = vocabLoader.getWords(currentDifficulty, 4);
		const correct = words[Math.floor(Math.random() * words.length)];
		const defs = this.shuffle(words.map(w => ({ word: w.word, def: w.hint || w.definition })));
		gameArea.innerHTML = `
		  <h2>üí° Match Meaning</h2>
		  <p>Word: <strong>${correct.word}</strong></p>
		  <div id="options"></div><div id="message"></div>
		  <button id="new">New Round</button>
		`;
		const optDiv = document.getElementById("options");
		defs.forEach(d => {
		  const btn = document.createElement("button");
		  btn.textContent = d.def;
		  btn.onclick = () => {
			const msg = document.getElementById("message");
			msg.textContent = d.word === correct.word ? "‚úÖ Correct!" : `‚ùå Wrong!`;
		  };
		  optDiv.appendChild(btn);
		});
		document.getElementById("new").onclick = () => this.start();
	  }

	  definitionQuiz() {
		const words = vocabLoader.getWords(currentDifficulty, 4);
		const correct = words[Math.floor(Math.random() * words.length)];
		const defs = this.shuffle(words.map(w => ({ word: w.word, def: w.hint || w.definition })));
		gameArea.innerHTML = `
		  <h2>üìò Definition Quiz</h2>
		  <p>Definition:</p>
		  <p><em>${correct.hint || correct.definition}</em></p>
		  <div id="options"></div><div id="message"></div>
		  <button id="new">New</button>
		`;
		const optDiv = document.getElementById("options");
		defs.forEach(d => {
		  const btn = document.createElement("button");
		  btn.textContent = d.word;
		  btn.onclick = () => {
			document.getElementById("message").textContent =
			  d.word === correct.word ? "‚úÖ Correct!" : `‚ùå Wrong! It was "${correct.word}".`;
		  };
		  optDiv.appendChild(btn);
		});
		document.getElementById("new").onclick = () => this.start();
	  }

	  missingLetter() {
		const word = this.wordObj.word.toUpperCase();
		const idx = Math.floor(Math.random() * word.length);
		const masked = word.substring(0, idx) + "_" + word.substring(idx + 1);
		gameArea.innerHTML = `
		  <h2>üî§ Missing Letter</h2>
		  <p>Word: ${masked}</p>
		  <input id="guess" placeholder="Enter missing letter">
		  <div id="message"></div>
		  <button id="check">Check</button><button id="new">New</button>
		`;
		this.linkBasicButtons((input, msg) => {
		  const letter = input.value.toUpperCase();
		  msg.textContent =
			letter === word[idx]
			  ? "‚úÖ Correct!"
			  : `‚ùå Wrong! It was "${word[idx]}". (${word})`;
		});
	  }

	  linkBasicButtons(customCheck) {
		const checkBtn = document.getElementById("check");
		const newBtn = document.getElementById("new");
		checkBtn.onclick = () => {
		  const guess = document.getElementById("guess").value.trim().toLowerCase();
		  const msg = document.getElementById("message");
		  if (customCheck) customCheck(document.getElementById("guess"), msg);
		  else {
			msg.textContent =
			  guess === this.wordObj.word.toLowerCase()
				? "‚úÖ Correct!"
				: `‚ùå Wrong! It was "${this.wordObj.word}".`;
		  }
		};
		newBtn.onclick = () => this.start();
	  }

	  shuffle(a) {
		for (let i = a.length - 1; i > 0; i--) {
		  const j = Math.floor(Math.random() * (i + 1));
		  [a[i], a[j]] = [a[j], a[i]];
		}
		return a;
	  }
	}
	</script>
</body>
</html>
