<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn new vocabulary words with interactive flashcards and multiple choice quizzes">
    <title>Vocabulary Builder - Brain Games Hub</title>
    <link rel="stylesheet" href="styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3535919568420997"
     crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Games</a>
        
        <div class="game-container">
            <h1 style="color: #667eea; text-align: center;">üìö Vocabulary Builder</h1>
            
            <div class="social-share">
                <button onclick="share('twitter')" class="share-btn">üê¶ Share</button>
                <button onclick="share('facebook')" class="share-btn">üìò Share</button>
            </div>
            
            <div class="difficulty-selector">
                <button class="difficulty-btn active" onclick="setDifficulty('easy')">Easy</button>
                <button class="difficulty-btn" onclick="setDifficulty('medium')">Medium</button>
                <button class="difficulty-btn" onclick="setDifficulty('hard')">Hard</button>
            </div>
            
            <div class="score-display">Score: <span id="score">0</span> / <span id="total">0</span></div>
            
            <div id="gameArea">
                <div style="text-align: center; padding: 40px;">
                    <p style="color: #666; font-size: 1.2em;">Loading vocabulary...</p>
                </div>
            </div>
            
            <div class="ad-rectangle">
                <div class="ad-placeholder">Advertisement 300x250</div>
            </div>
        </div>
    </div>
    
    <script src="shared.js"></script>
    <script>
        let difficulty = 'easy';
        let words = [];
        let currentIndex = 0;
        let score = 0;
        
        async function init() {
            await vocabLoader.waitForLoad();
            loadWords();
        }
        
        function setDifficulty(level) {
            difficulty = level;
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            loadWords();
        }
        
        function loadWords() {
            words = vocabLoader.getWords(difficulty, 10);
            currentIndex = 0;
            score = 0;
            document.getElementById('score').textContent = '0';
            document.getElementById('total').textContent = words.length;
            showQuestion();
        }
        
        function showQuestion() {
            if (currentIndex >= words.length) {
                endGame();
                return;
            }
            
            const word = words[currentIndex];
            const allWords = vocabLoader.getWords(difficulty, 20);
            const wrongOptions = allWords.filter(w => w.word !== word.word).slice(0, 3);
            const options = shuffleArray([word, ...wrongOptions]);
            
            document.getElementById('gameArea').innerHTML = `
                <div class="question-container">
                    <h2 style="text-align: center; color: #333; margin-bottom: 20px;">What does this word mean?</h2>
                    <div style="text-align: center; font-size: 2.5em; color: #667eea; font-weight: bold; margin: 30px 0; text-transform: capitalize;">
                        ${escapeHtml(word.word)}
                    </div>
                    <div class="options">
                        ${options.map(opt => `
                            <button class="option-btn" onclick="checkAnswer('${escapeHtml(opt.word)}')">
                                ${escapeHtml(opt.definition)}
                            </button>
                        `).join('')}
                    </div>
                    <div id="feedback" style="text-align: center; margin-top: 20px; min-height: 30px;"></div>
                </div>
            `;
        }
        
        function checkAnswer(selected) {
            const correct = words[currentIndex].word;
            const buttons = document.querySelectorAll('.option-btn');
            const feedback = document.getElementById('feedback');
            
            buttons.forEach(btn => {
                btn.disabled = true;
                const btnWord = words.find(w => w.definition === btn.textContent.trim());
                const correctWord = words[currentIndex];
                
                if (btn.textContent.trim() === correctWord.definition) {
                    btn.classList.add('correct');
                }
                if (btn.textContent.trim() !== correctWord.definition && selected === (btnWord ? btnWord.word : '')) {
                    btn.classList.add('wrong');
                }
            });
            
            if (selected === correct) {
                score++;
                document.getElementById('score').textContent = score;
                feedback.innerHTML = '<p style="color: #4caf50; font-size: 1.3em; font-weight: bold;">‚úì Correct!</p>';
            } else {
                feedback.innerHTML = `<p style="color: #f44336; font-size: 1.3em; font-weight: bold;">‚úó Incorrect. The answer is: "${escapeHtml(words[currentIndex].definition)}"</p>`;
            }
            
            setTimeout(() => {
                currentIndex++;
                showQuestion();
            }, 2500);
        }
        
        function endGame() {
            const percentage = Math.round((score / words.length) * 100);
            const finalScore = score * 10;
            
            let message = '';
            if (percentage >= 90) message = 'Outstanding! üåü';
            else if (percentage >= 70) message = 'Great job! üéâ';
            else if (percentage >= 50) message = 'Good effort! üëç';
            else message = 'Keep practicing! üí™';
            
            document.getElementById('gameArea').innerHTML = `
                <div class="result-screen">
                    <h2 style="color: #667eea;">${message}</h2>
                    <div class="result-score">${score} / ${words.length}</div>
                    <p style="font-size: 1.3em; color: #666; margin-bottom: 10px;">You scored ${percentage}%</p>
                    <p style="font-size: 1.1em; color: #667eea; margin-bottom: 30px;">Points: ${finalScore}</p>
                    <button class="play-btn" onclick="submitScoreAndRestart(${finalScore})" style="margin-bottom: 10px;">Submit Score & Play Again</button>
                    <button class="play-btn" onclick="loadWords()" style="background: #6c757d;">Play Again</button>
                </div>
            `;
        }
        
        function submitScoreAndRestart(finalScore) {
            submitScore('Vocabulary Builder', finalScore, difficulty);
            loadWords();
        }
        
        // Start the game
        init();
    </script>
</body>
</html>